# AI活用型開発プロジェクト 準備ドキュメント

## 1. はじめに

本ドキュメントは、「カップル・夫婦専用家計管理アプリ」開発プロジェクトにおいて、AIコーディングアシスタント「Roo Code (Gemini 2.5 Pro)」を最大限に活用し、開発効率と品質を向上させるための基本ルールとワークフローを定義するものです。  
開発者全員が本ドキュメントに目を通し、共通認識を持って開発に着手することを目的とします。

## 2. 開発の基本方針

### AIとのペアプログラミング

- AIを単なるコード生成ツールとしてではなく、思考の壁打ち相手やレビューア、リファクタリングのパートナーとして捉える。
- 積極的にAIと対話しながら開発を進める。

### エディタ

- 「Cursor」を推奨。
- コードベース全体をAIが認識しやすく、精度の高いサポートが可能。

### 人間の役割

- AIの生成したコードは必ず人間がレビューする。
- 要件との整合性、セキュリティ、パフォーマンスの観点から確認・テストを行う。

## 3. GitHub 運用ルール

### 3.1 ブランチ戦略

- **GitHub Flow** を採用。
- **main ブランチ**:
  - 常にデプロイ可能な状態。
  - 直接コミット禁止。PR経由でマージ。
- **フィーチャーブランチ**:
  - mainから作成。
  - 命名規則:
    - `feat/{issue番号}-{概要}`（例: `feat/15-expense-list-screen`）
    - `fix/{issue番号}-{概要}`（例: `fix/21-login-button-bug`）
    - `docs/{issue番号}-{概要}`（例: `docs/5-setup-guide`）

### 3.2 コミットメッセージルール

- **Conventional Commits** に準拠。
- フォーマット: `<type>(<scope>): <subject>`

#### 主な type:

- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメント
- `style`: フォーマット調整
- `refactor`: リファクタリング
- `test`: テスト追加/修正
- `chore`: 補助ツールやライブラリの変更など

#### 例:

```
feat(ui): 支出一覧画面の基本レイアウトを実装
fix(api): 金額が0の場合のバグを修正
docs(readme): セットアップ手順を更新
```

### 3.3 プルリクエスト

- **main ブランチ**へのマージはPRを通じて行う。
- **必須項目**:
  - `Closes #番号` の形式でIssueを紐づけ。
  - 変更内容の要約。
  - 最低1名のレビュー（いなければセルフレビュー）。

## 4. AIへの情報提供と指示ルール

### 4.1 技術ドキュメントの読み込みと活用

- **バージョン指定**:  
  例: `Next.js 15 (React 19)`、`Go 1.2x`
- **公式ドキュメントの活用**:  
  URLを指定し、参考にさせる。
- **プロジェクト内ドキュメントの提供**:  
  要件定義やDDLを参照に指示。

### 4.2 GitHub Issueとの連携

- **詳細なIssueの作成**:
  - What / Why / Acceptance Criteriaを明記。
- **プロンプトでIssue情報を貼り付ける**:

例:

```
# Issue詳細
- 概要: 支出一覧画面の実装
- 完了の定義:
  - 日付降順
  - フィルター機能
  - 編集/削除条件付き表示
```

### 4.3 AIペルソナとコーディング規約（フロントエンド）

#### ペルソナ:

- React / Next.js / TypeScript / TailwindCSS などに精通したシニア開発者
- 論理的・正確な思考を行う

#### 応答ルール:

- 擬似コードで計画 → 確認後に実装
- TODOなしで完全実装
- コード以外の説明は最小限

#### 実装ガイドライン:

- DRY原則 / 可読性重視 / Early Return推奨
- Tailwind CSS使用
- 命名規則:
  - 説明的な変数名
  - `handle` 接頭辞（例: `handleClick`）
- アクセシビリティ対応
- 関数定義は `const foo = () => {}` 形式
- 型定義はTypeScriptを使用

### 4.4 AIペルソナとコーディング規約（バックエンド）

#### ペルソナ:

- Go言語 + net/http（Go 1.22）の熟練開発者

#### 実装ガイドライン:

- RESTful原則 / ServeMux活用
- 入力バリデーション / 適切なHTTPステータス / JSONレスポンス
- エラー処理 / ロギング / セキュリティ対応
- ミドルウェア導入可能
- 必要なすべてのコード（インポート含む）を含める
- テスト方法を提示（testingパッケージ使用）

## 5. 開発環境

### 5.1 フロントエンド

- Node.js (LTS)
- npm
- `npm run dev` で起動

### 5.2 バックエンド

- Docker / Docker Compose
- Go + PostgreSQL
- `docker-compose.yml` により、共通環境構築

## 6. 開発ワークフロー例

1. Issue選択（例: #15 支出一覧画面の実装）
2. ブランチ作成

```bash
git checkout main
git pull
git checkout -b feat/15-expense-list-screen
```

3. AIへプロンプト送信（Issue情報と規約含む）
4. コーディング + テスト
5. コミット

```bash
git add .
git commit -m "feat(ui): implement basic layout for expense list screen"
```

6. プッシュ

```bash
git push origin feat/15-expense-list-screen
```

7. PR作成 → レビュー → マージ → ブランチ削除

---

以上のルールとワークフローに従うことで、AIの力を最大限に活用し、チームとして一貫性のある効率的な開発を進めることができます。